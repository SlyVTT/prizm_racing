#include "display.h"
#include "rasterizer.h"
#include "time.h"
#include "util.h"
#include "input.h"
#include "mat4.h"
#include "rmath.h"
#include "math.h"

#include "car.h"
#include "track.h"

mat4 view;
vec3<float> cameraPos = {0, 0, 0};
vec3<float> cameraSpeed = {0, 0, 0};
float cameraAngle = 0;

int main(){
	fp st[SIN_SAMPLES];
	sinTable = st;
	createSinTable();

	Triangle carTriangles[] = {
		{
			{0.794, 0.294, -0.380},
			{-0.535, 0.294, -0.443},
			{-0.535, 0.294, -0.000},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{0.794, 0.294, -0.380},
			{0.794, 0.294, -0.000},
			{1.345, 0.294, -0.000},
			{-0.000, 1.000, -0.000},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, -0.380},
			{1.886, 0.294, -0.000},
			{1.795, 0.294, -0.605},
			{-0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{-0.535, 0.294, -0.000},
			{-0.535, 0.294, -0.443},
			{-1.188, 0.263, -0.431},
			{-0.047, 0.999, 0.000},
			newColor(203, 2, 1)},
		{
			{-1.399, 0.128, -0.681},
			{-1.188, 0.263, -0.431},
			{-1.188, 0.227, -0.719},
			{-0.440, 0.891, -0.109},
			newColor(203, 2, 1)},
		{
			{1.795, 0.294, -0.605},
			{1.886, 0.294, -0.000},
			{1.886, 0.003, -0.000},
			{0.989, -0.000, -0.149},
			newColor(203, 2, 1)},
		{
			{1.795, 0.003, -0.605},
			{1.886, 0.003, -0.000},
			{0.985, -0.225, -0.000},
			{0.245, -0.969, -0.037},
			newColor(203, 2, 1)},
		{
			{0.743, -0.212, -0.546},
			{0.985, -0.225, -0.000},
			{0.302, -0.435, -0.000},
			{0.290, -0.945, -0.151},
			newColor(85, 163, 202)},
		{
			{-0.360, -0.259, 0.510},
			{0.238, -0.401, 0.406},
			{0.578, -0.237, 0.527},
			{-0.001, -0.594, 0.805},
			newColor(85, 163, 202)},
		{
			{0.302, -0.435, -0.000},
			{-0.559, -0.455, -0.000},
			{-0.474, -0.415, -0.387},
			{0.024, -0.995, -0.098},
			newColor(203, 2, 1)},
		{
			{-0.559, -0.240, -0.325},
			{-1.287, -0.240, -0.394},
			{-0.474, -0.415, -0.387},
			{-0.088, -0.368, 0.926},
			newColor(203, 2, 1)},
		{
			{-0.559, -0.240, -0.325},
			{-0.559, -0.455, -0.000},
			{-0.559, -0.240, -0.000},
			{-1.000, -0.000, -0.000},
			newColor(203, 2, 1)},
		{
			{-0.474, -0.415, -0.387},
			{-1.287, -0.240, -0.394},
			{-0.474, -0.239, -0.525},
			{-0.125, -0.612, -0.781},
			newColor(203, 2, 1)},
		{
			{-1.282, -0.240, -0.000},
			{-0.559, -0.240, -0.325},
			{-0.559, -0.240, -0.000},
			{0.000, -1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.489, -0.177, -0.683},
			{0.756, -0.055, -0.687},
			{0.743, -0.212, -0.546},
			{0.064, -0.671, -0.739},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, -0.380},
			{1.283, -0.062, -0.380},
			{0.868, -0.070, -0.380},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, -0.674},
			{0.794, 0.294, -0.674},
			{0.756, -0.055, -0.687},
			{-0.000, 0.037, -0.999},
			newColor(203, 2, 1)},
		{
			{-1.287, -0.240, -0.394},
			{-1.385, -0.217, -0.739},
			{-0.489, -0.177, -0.683},
			{0.049, -0.995, -0.083},
			newColor(203, 2, 1)},
		{
			{-1.287, -0.240, -0.394},
			{-1.282, -0.240, -0.000},
			{-1.441, -0.240, -0.000},
			{-0.000, -1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{-1.441, -0.240, -0.000},
			{-1.399, 0.134, 0.012},
			{-1.399, 0.128, -0.681},
			{-0.994, 0.112, -0.001},
			newColor(203, 2, 1)},
		{
			{-1.036, -0.065, -0.431},
			{-1.036, -0.065, -0.719},
			{-1.188, 0.227, -0.719},
			{0.888, 0.460, 0.000},
			newColor(0, 0, 0)},
		{
			{-1.036, -0.065, -0.431},
			{-0.605, -0.065, -0.443},
			{-0.605, -0.065, -0.697},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, -0.443},
			{-0.605, -0.065, -0.443},
			{-1.036, -0.065, -0.431},
			{-0.027, 0.005, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.605, -0.065, -0.443},
			{-0.535, 0.294, -0.443},
			{-0.535, 0.294, -0.674},
			{-0.982, 0.190, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.489, -0.177, -0.683},
			{-0.605, -0.065, -0.697},
			{-0.535, 0.294, -0.674},
			{0.148, 0.033, -0.988},
			newColor(203, 2, 1)},
		{
			{-0.489, -0.177, -0.683},
			{-1.385, -0.217, -0.739},
			{-1.036, -0.065, -0.719},
			{0.063, -0.014, -0.998},
			newColor(203, 2, 1)},
		{
			{-1.399, 0.128, -0.681},
			{-1.188, 0.227, -0.719},
			{-1.036, -0.065, -0.719},
			{-0.143, -0.074, -0.987},
			newColor(203, 2, 1)},
		{
			{1.283, -0.062, -0.380},
			{1.345, 0.294, -0.380},
			{1.345, 0.294, -0.711},
			{-0.985, 0.173, 0.000},
			newColor(0, 0, 0)},
		{
			{0.794, 0.294, -0.674},
			{0.794, 0.294, -0.380},
			{0.868, -0.070, -0.380},
			{0.980, 0.200, 0.000},
			newColor(0, 0, 0)},
		{
			{0.868, -0.070, -0.711},
			{0.756, -0.055, -0.687},
			{0.794, 0.294, -0.674},
			{-0.199, 0.058, -0.978},
			newColor(203, 2, 1)},
		{
			{0.756, -0.055, -0.687},
			{0.868, -0.070, -0.711},
			{0.743, -0.212, -0.546},
			{-0.241, -0.638, -0.731},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, -0.711},
			{1.795, 0.294, -0.605},
			{1.795, 0.003, -0.605},
			{0.229, -0.000, -0.973},
			newColor(203, 2, 1)},
		{
			{0.868, -0.070, -0.711},
			{1.283, -0.062, -0.711},
			{0.743, -0.212, -0.546},
			{0.014, -0.764, -0.645},
			newColor(203, 2, 1)},
		{
			{0.743, -0.212, -0.546},
			{1.283, -0.062, -0.711},
			{1.795, 0.003, -0.605},
			{0.178, -0.944, -0.277},
			newColor(203, 2, 1)},
		{
			{1.283, -0.062, -0.380},
			{1.283, -0.062, -0.711},
			{0.868, -0.070, -0.711},
			{-0.019, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.794, 0.294, 0.380},
			{-0.535, 0.294, 0.443},
			{0.794, 0.294, 0.674},
			{0.000, 1.000, -0.000},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, -0.000},
			{0.794, 0.294, -0.000},
			{0.794, 0.294, 0.380},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{1.795, 0.294, 0.605},
			{1.345, 0.294, 0.380},
			{1.345, 0.294, 0.711},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{-1.188, 0.263, 0.431},
			{-0.535, 0.294, 0.443},
			{-0.535, 0.294, -0.000},
			{-0.047, 0.999, 0.000},
			newColor(203, 2, 1)},
		{
			{-1.188, 0.263, 0.431},
			{-1.399, 0.128, 0.681},
			{-1.188, 0.227, 0.719},
			{-0.440, 0.891, 0.109},
			newColor(203, 2, 1)},
		{
			{1.886, 0.003, -0.000},
			{1.886, 0.294, -0.000},
			{1.795, 0.294, 0.605},
			{0.989, 0.000, 0.149},
			newColor(203, 2, 1)},
		{
			{0.985, -0.225, -0.000},
			{1.886, 0.003, -0.000},
			{1.795, 0.003, 0.605},
			{0.245, -0.969, 0.037},
			newColor(203, 2, 1)},
		{
			{0.302, -0.435, -0.000},
			{0.985, -0.225, -0.000},
			{0.743, -0.212, 0.546},
			{0.290, -0.945, 0.151},
			newColor(85, 163, 202)},
		{
			{-0.474, -0.239, -0.525},
			{-0.360, -0.394, -0.404},
			{-0.474, -0.415, -0.387},
			{-0.003, -0.617, -0.787},
			newColor(203, 2, 1)},
		{
			{0.302, -0.435, -0.000},
			{0.302, -0.424, 0.389},
			{-0.474, -0.415, 0.387},
			{-0.011, -1.000, 0.027},
			newColor(203, 2, 1)},
		{
			{-0.559, -0.240, 0.325},
			{-0.474, -0.415, 0.387},
			{-1.287, -0.240, 0.394},
			{-0.088, -0.368, -0.926},
			newColor(203, 2, 1)},
		{
			{-0.559, -0.455, -0.000},
			{-0.559, -0.240, 0.325},
			{-0.559, -0.240, -0.000},
			{-1.000, -0.000, 0.000},
			newColor(203, 2, 1)},
		{
			{-0.474, -0.415, 0.387},
			{-0.474, -0.239, 0.525},
			{-1.287, -0.240, 0.394},
			{-0.125, -0.612, 0.781},
			newColor(203, 2, 1)},
		{
			{-1.282, -0.240, -0.000},
			{-0.559, -0.240, 0.325},
			{-1.287, -0.240, 0.394},
			{0.000, -1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.743, -0.212, 0.546},
			{0.756, -0.055, 0.687},
			{-0.489, -0.177, 0.683},
			{0.064, -0.671, 0.739},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, 0.380},
			{0.794, 0.294, 0.380},
			{0.868, -0.070, 0.380},
			{-0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{0.756, -0.055, 0.687},
			{0.794, 0.294, 0.674},
			{-0.535, 0.294, 0.674},
			{0.000, 0.037, 0.999},
			newColor(203, 2, 1)},
		{
			{-1.287, -0.240, 0.394},
			{-0.474, -0.239, 0.525},
			{-0.489, -0.177, 0.683},
			{-0.057, -0.931, 0.359},
			newColor(203, 2, 1)},
		{
			{-1.441, -0.240, -0.000},
			{-1.282, -0.240, -0.000},
			{-1.287, -0.240, 0.394},
			{0.000, -1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{-1.399, 0.128, 0.681},
			{-1.399, 0.134, -0.012},
			{-1.441, -0.240, -0.000},
			{-0.994, 0.112, 0.001},
			newColor(203, 2, 1)},
		{
			{-1.036, -0.065, 0.431},
			{-1.188, 0.263, 0.431},
			{-1.188, 0.227, 0.719},
			{0.907, 0.419, 0.051},
			newColor(0, 0, 0)},
		{
			{-1.036, -0.065, 0.431},
			{-1.036, -0.065, 0.719},
			{-0.605, -0.065, 0.697},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, 0.443},
			{-1.188, 0.263, 0.431},
			{-1.036, -0.065, 0.431},
			{-0.018, -0.008, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, 0.674},
			{-0.535, 0.294, 0.443},
			{-0.605, -0.065, 0.443},
			{-0.982, 0.190, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.489, -0.177, 0.683},
			{-0.535, 0.294, 0.674},
			{-0.605, -0.065, 0.697},
			{0.148, 0.033, 0.988},
			newColor(203, 2, 1)},
		{
			{-1.036, -0.065, 0.719},
			{-1.385, -0.217, 0.739},
			{-0.489, -0.177, 0.683},
			{0.063, -0.014, 0.998},
			newColor(203, 2, 1)},
		{
			{-1.036, -0.065, 0.719},
			{-1.188, 0.227, 0.719},
			{-1.399, 0.128, 0.681},
			{-0.143, -0.074, 0.987},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, 0.711},
			{1.345, 0.294, 0.380},
			{1.283, -0.062, 0.380},
			{-0.985, 0.173, 0.000},
			newColor(0, 0, 0)},
		{
			{0.868, -0.070, 0.380},
			{0.794, 0.294, 0.380},
			{0.794, 0.294, 0.674},
			{0.980, 0.200, 0.000},
			newColor(0, 0, 0)},
		{
			{0.868, -0.070, 0.711},
			{0.794, 0.294, 0.674},
			{0.756, -0.055, 0.687},
			{-0.199, 0.058, 0.978},
			newColor(203, 2, 1)},
		{
			{0.756, -0.055, 0.687},
			{0.743, -0.212, 0.546},
			{0.868, -0.070, 0.711},
			{-0.241, -0.638, 0.731},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, 0.711},
			{1.283, -0.062, 0.711},
			{1.795, 0.003, 0.605},
			{0.207, -0.036, 0.978},
			newColor(203, 2, 1)},
		{
			{0.868, -0.070, 0.711},
			{0.743, -0.212, 0.546},
			{1.283, -0.062, 0.711},
			{0.014, -0.764, 0.645},
			newColor(203, 2, 1)},
		{
			{0.743, -0.212, 0.546},
			{1.795, 0.003, 0.605},
			{1.283, -0.062, 0.711},
			{0.178, -0.944, 0.277},
			newColor(203, 2, 1)},
		{
			{0.868, -0.070, 0.711},
			{1.283, -0.062, 0.711},
			{1.283, -0.062, 0.380},
			{-0.019, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, -0.443},
			{0.794, 0.294, -0.674},
			{-0.535, 0.294, -0.674},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{0.794, 0.294, -0.380},
			{-0.535, 0.294, -0.000},
			{0.794, 0.294, -0.000},
			{-0.000, 1.000, -0.000},
			newColor(203, 2, 1)},
		{
			{-0.535, 0.294, -0.443},
			{0.794, 0.294, -0.380},
			{0.794, 0.294, -0.674},
			{-0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{0.794, 0.294, -0.380},
			{1.345, 0.294, -0.000},
			{1.345, 0.294, -0.380},
			{-0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{1.886, 0.294, -0.000},
			{1.345, 0.294, -0.380},
			{1.345, 0.294, -0.000},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, -0.380},
			{1.795, 0.294, -0.605},
			{1.345, 0.294, -0.711},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{-0.535, 0.294, -0.000},
			{-1.188, 0.263, -0.431},
			{-1.188, 0.263, 0.012},
			{-0.047, 0.999, -0.001},
			newColor(203, 2, 1)},
		{
			{-1.188, 0.263, 0.012},
			{-1.188, 0.263, -0.431},
			{-1.399, 0.134, 0.012},
			{-0.522, 0.853, -0.000},
			newColor(203, 2, 1)},
		{
			{-1.399, 0.134, 0.012},
			{-1.188, 0.263, -0.431},
			{-1.399, 0.128, -0.681},
			{-0.532, 0.847, -0.007},
			newColor(203, 2, 1)},
		{
			{1.795, 0.294, -0.605},
			{1.886, 0.003, -0.000},
			{1.795, 0.003, -0.605},
			{0.989, -0.000, -0.149},
			newColor(203, 2, 1)},
		{
			{1.795, 0.003, -0.605},
			{0.985, -0.225, -0.000},
			{0.743, -0.212, -0.546},
			{0.193, -0.975, -0.109},
			newColor(203, 2, 1)},
		{
			{0.743, -0.212, -0.546},
			{0.302, -0.435, -0.000},
			{0.302, -0.424, -0.389},
			{0.426, -0.904, -0.024},
			newColor(85, 163, 202)},
		{
			{0.302, -0.424, 0.389},
			{-0.360, -0.394, 0.404},
			{-0.474, -0.415, 0.387},
			{-0.009, -0.598, 0.801},
			newColor(203, 2, 1)},
		{
			{0.302, -0.435, -0.000},
			{-0.474, -0.415, -0.387},
			{0.302, -0.424, -0.389},
			{-0.011, -1.000, -0.027},
			newColor(203, 2, 1)},
		{
			{-0.559, -0.240, -0.325},
			{-0.474, -0.415, -0.387},
			{-0.559, -0.455, -0.000},
			{-0.905, -0.355, -0.235},
			newColor(203, 2, 1)},
		{
			{-1.282, -0.240, -0.000},
			{-1.287, -0.240, -0.394},
			{-0.559, -0.240, -0.325},
			{0.000, -1.000, -0.000},
			newColor(0, 0, 0)},
		{
			{-0.489, -0.177, -0.683},
			{0.743, -0.212, -0.546},
			{-0.474, -0.239, -0.525},
			{0.015, -0.931, -0.366},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, -0.380},
			{0.868, -0.070, -0.380},
			{0.794, 0.294, -0.380},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, -0.674},
			{0.756, -0.055, -0.687},
			{-0.489, -0.177, -0.683},
			{-0.005, 0.018, -1.000},
			newColor(203, 2, 1)},
		{
			{-1.287, -0.240, -0.394},
			{-0.489, -0.177, -0.683},
			{-0.474, -0.239, -0.525},
			{-0.057, -0.931, -0.359},
			newColor(203, 2, 1)},
		{
			{-1.287, -0.240, -0.394},
			{-1.441, -0.240, -0.000},
			{-1.385, -0.217, -0.739},
			{-0.101, -0.994, -0.040},
			newColor(203, 2, 1)},
		{
			{-1.441, -0.240, -0.000},
			{-1.399, 0.128, -0.681},
			{-1.385, -0.217, -0.739},
			{-0.997, -0.027, -0.076},
			newColor(203, 2, 1)},
		{
			{-1.036, -0.065, -0.431},
			{-1.188, 0.227, -0.719},
			{-1.188, 0.263, -0.431},
			{0.907, 0.419, -0.051},
			newColor(0, 0, 0)},
		{
			{-1.036, -0.065, -0.431},
			{-0.605, -0.065, -0.697},
			{-1.036, -0.065, -0.719},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, -0.443},
			{-1.036, -0.065, -0.431},
			{-1.188, 0.263, -0.431},
			{-0.018, -0.008, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.605, -0.065, -0.443},
			{-0.535, 0.294, -0.674},
			{-0.605, -0.065, -0.697},
			{-0.982, 0.190, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.489, -0.177, -0.683},
			{-1.036, -0.065, -0.719},
			{-0.605, -0.065, -0.697},
			{0.052, -0.067, -0.996},
			newColor(203, 2, 1)},
		{
			{-1.399, 0.128, -0.681},
			{-1.036, -0.065, -0.719},
			{-1.385, -0.217, -0.739},
			{-0.016, 0.165, -0.986},
			newColor(203, 2, 1)},
		{
			{1.283, -0.062, -0.380},
			{1.345, 0.294, -0.711},
			{1.283, -0.062, -0.711},
			{-0.985, 0.173, 0.000},
			newColor(0, 0, 0)},
		{
			{0.794, 0.294, -0.674},
			{0.868, -0.070, -0.380},
			{0.868, -0.070, -0.711},
			{0.980, 0.200, 0.000},
			newColor(0, 0, 0)},
		{
			{1.345, 0.294, -0.711},
			{1.795, 0.003, -0.605},
			{1.283, -0.062, -0.711},
			{0.207, -0.036, -0.978},
			newColor(203, 2, 1)},
		{
			{1.283, -0.062, -0.380},
			{0.868, -0.070, -0.711},
			{0.868, -0.070, -0.380},
			{-0.019, 1.000, -0.000},
			newColor(0, 0, 0)},
		{
			{0.794, 0.294, 0.674},
			{-0.535, 0.294, 0.443},
			{-0.535, 0.294, 0.674},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{-0.535, 0.294, 0.443},
			{0.794, 0.294, 0.380},
			{-0.535, 0.294, -0.000},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{-0.535, 0.294, -0.000},
			{0.794, 0.294, 0.380},
			{0.794, 0.294, -0.000},
			{-0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, -0.000},
			{0.794, 0.294, 0.380},
			{1.345, 0.294, 0.380},
			{-0.000, 1.000, -0.000},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, 0.380},
			{1.886, 0.294, -0.000},
			{1.345, 0.294, -0.000},
			{0.000, 1.000, 0.000},
			newColor(203, 2, 1)},
		{
			{1.886, 0.294, -0.000},
			{1.345, 0.294, 0.380},
			{1.795, 0.294, 0.605},
			{0.000, 1.000, -0.000},
			newColor(203, 2, 1)},
		{
			{-1.188, 0.263, 0.431},
			{-0.535, 0.294, -0.000},
			{-1.188, 0.263, -0.012},
			{-0.047, 0.999, 0.001},
			newColor(203, 2, 1)},
		{
			{-1.399, 0.128, 0.681},
			{-1.188, 0.263, 0.431},
			{-1.399, 0.134, -0.012},
			{-0.532, 0.847, 0.007},
			newColor(203, 2, 1)},
		{
			{-1.399, 0.134, -0.012},
			{-1.188, 0.263, 0.431},
			{-1.188, 0.263, -0.012},
			{-0.522, 0.853, 0.000},
			newColor(203, 2, 1)},
		{
			{1.886, 0.003, -0.000},
			{1.795, 0.294, 0.605},
			{1.795, 0.003, 0.605},
			{0.989, -0.000, 0.149},
			newColor(203, 2, 1)},
		{
			{0.985, -0.225, -0.000},
			{1.795, 0.003, 0.605},
			{0.743, -0.212, 0.546},
			{0.193, -0.975, 0.109},
			newColor(203, 2, 1)},
		{
			{0.302, -0.435, -0.000},
			{0.743, -0.212, 0.546},
			{0.302, -0.424, 0.389},
			{0.426, -0.904, 0.024},
			newColor(85, 163, 202)},
		{
			{0.302, -0.424, 0.389},
			{0.578, -0.237, 0.527},
			{0.238, -0.401, 0.406},
			{-0.004, -0.589, 0.808},
			newColor(203, 2, 1)},
		{
			{0.302, -0.435, -0.000},
			{-0.474, -0.415, 0.387},
			{-0.559, -0.455, -0.000},
			{0.024, -0.995, 0.098},
			newColor(203, 2, 1)},
		{
			{-0.559, -0.455, -0.000},
			{-0.474, -0.415, 0.387},
			{-0.559, -0.240, 0.325},
			{-0.905, -0.355, 0.235},
			newColor(203, 2, 1)},
		{
			{-1.282, -0.240, -0.000},
			{-0.559, -0.240, -0.000},
			{-0.559, -0.240, 0.325},
			{0.000, -1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.743, -0.212, 0.546},
			{-0.489, -0.177, 0.683},
			{-0.474, -0.239, 0.525},
			{0.015, -0.931, 0.366},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, 0.380},
			{0.868, -0.070, 0.380},
			{1.283, -0.062, 0.380},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{0.756, -0.055, 0.687},
			{-0.535, 0.294, 0.674},
			{-0.489, -0.177, 0.683},
			{-0.005, 0.018, 1.000},
			newColor(203, 2, 1)},
		{
			{-1.287, -0.240, 0.394},
			{-0.489, -0.177, 0.683},
			{-1.385, -0.217, 0.739},
			{0.049, -0.995, 0.083},
			newColor(203, 2, 1)},
		{
			{-1.441, -0.240, -0.000},
			{-1.287, -0.240, 0.394},
			{-1.385, -0.217, 0.739},
			{-0.101, -0.994, 0.040},
			newColor(203, 2, 1)},
		{
			{-1.399, 0.128, 0.681},
			{-1.441, -0.240, -0.000},
			{-1.385, -0.217, 0.739},
			{-0.997, -0.027, 0.076},
			newColor(203, 2, 1)},
		{
			{-1.036, -0.065, 0.431},
			{-1.188, 0.227, 0.719},
			{-1.036, -0.065, 0.719},
			{0.888, 0.460, 0.000},
			newColor(0, 0, 0)},
		{
			{-1.036, -0.065, 0.431},
			{-0.605, -0.065, 0.697},
			{-0.605, -0.065, 0.443},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, 0.443},
			{-1.036, -0.065, 0.431},
			{-0.605, -0.065, 0.443},
			{-0.027, 0.005, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.535, 0.294, 0.674},
			{-0.605, -0.065, 0.443},
			{-0.605, -0.065, 0.697},
			{-0.982, 0.190, -0.000},
			newColor(0, 0, 0)},
		{
			{-1.036, -0.065, 0.719},
			{-0.489, -0.177, 0.683},
			{-0.605, -0.065, 0.697},
			{0.052, -0.067, 0.996},
			newColor(203, 2, 1)},
		{
			{-1.036, -0.065, 0.719},
			{-1.399, 0.128, 0.681},
			{-1.385, -0.217, 0.739},
			{-0.016, 0.165, 0.986},
			newColor(203, 2, 1)},
		{
			{1.345, 0.294, 0.711},
			{1.283, -0.062, 0.380},
			{1.283, -0.062, 0.711},
			{-0.985, 0.173, -0.000},
			newColor(0, 0, 0)},
		{
			{0.868, -0.070, 0.380},
			{0.794, 0.294, 0.674},
			{0.868, -0.070, 0.711},
			{0.980, 0.200, 0.000},
			newColor(0, 0, 0)},
		{
			{1.345, 0.294, 0.711},
			{1.795, 0.003, 0.605},
			{1.795, 0.294, 0.605},
			{0.229, 0.000, 0.973},
			newColor(203, 2, 1)},
		{
			{0.868, -0.070, 0.711},
			{1.283, -0.062, 0.380},
			{0.868, -0.070, 0.380},
			{-0.019, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{1.237, -0.031, 0.751},
			{0.964, 0.018, 0.751},
			{0.915, -0.031, 0.751},
			{-0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, 0.420},
			{0.915, -0.031, 0.420},
			{0.915, 0.291, 0.420},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{1.237, -0.031, 0.751},
			{1.237, 0.291, 0.420},
			{1.237, 0.291, 0.751},
			{1.000, 0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.915, 0.291, 0.751},
			{0.915, -0.031, 0.420},
			{0.915, -0.031, 0.751},
			{-1.000, 0.000, -0.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, 0.751},
			{1.237, -0.031, 0.420},
			{1.237, -0.031, 0.751},
			{0.000, -1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, 0.751},
			{0.915, 0.291, 0.420},
			{0.915, 0.291, 0.751},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, -0.409},
			{1.237, 0.291, -0.409},
			{0.915, 0.291, -0.409},
			{0.000, 0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{1.237, -0.031, -0.739},
			{1.189, 0.243, -0.739},
			{1.237, 0.291, -0.739},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{0.915, 0.291, -0.409},
			{0.915, -0.031, -0.739},
			{0.915, -0.031, -0.409},
			{-1.000, 0.000, -0.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, -0.409},
			{1.237, -0.031, -0.739},
			{1.237, -0.031, -0.409},
			{0.000, -1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, -0.409},
			{0.915, 0.291, -0.739},
			{0.915, 0.291, -0.409},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.985, -0.031, -0.455},
			{-0.663, 0.291, -0.455},
			{-0.985, 0.291, -0.455},
			{0.000, 0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, -0.786},
			{-0.937, 0.243, -0.786},
			{-0.985, 0.291, -0.786},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, 0.291, -0.455},
			{-0.985, -0.031, -0.786},
			{-0.985, -0.031, -0.455},
			{-1.000, 0.000, -0.000},
			newColor(0, 0, 0)},
		{
			{-0.985, -0.031, -0.455},
			{-0.663, -0.031, -0.786},
			{-0.663, -0.031, -0.455},
			{0.000, -1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, -0.455},
			{-0.985, 0.291, -0.786},
			{-0.985, 0.291, -0.455},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, -0.031, -0.455},
			{-0.663, 0.291, -0.786},
			{-0.663, 0.291, -0.455},
			{1.000, 0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{1.237, -0.031, -0.739},
			{1.237, 0.291, -0.409},
			{1.237, -0.031, -0.409},
			{1.000, -0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, 0.783},
			{-0.711, 0.018, 0.783},
			{-0.663, -0.031, 0.783},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, 0.453},
			{-0.985, -0.031, 0.453},
			{-0.985, 0.291, 0.453},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, 0.291, 0.783},
			{-0.985, -0.031, 0.453},
			{-0.985, -0.031, 0.783},
			{-1.000, 0.000, -0.000},
			newColor(0, 0, 0)},
		{
			{-0.985, -0.031, 0.783},
			{-0.663, -0.031, 0.453},
			{-0.663, -0.031, 0.783},
			{0.000, -1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, 0.783},
			{-0.985, 0.291, 0.453},
			{-0.985, 0.291, 0.783},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, -0.031, 0.783},
			{-0.663, 0.291, 0.453},
			{-0.663, 0.291, 0.783},
			{1.000, 0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.937, 0.018, 0.783},
			{-0.711, 0.243, 0.783},
			{-0.937, 0.243, 0.783},
			{0.000, 0.000, 1.000},
			newColor(255, 255, 255)},
		{
			{-0.985, -0.031, 0.783},
			{-0.937, 0.243, 0.783},
			{-0.985, 0.291, 0.783},
			{0.000, 0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.663, -0.031, 0.783},
			{-0.937, 0.018, 0.783},
			{-0.985, -0.031, 0.783},
			{-0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, 0.291, 0.783},
			{-0.711, 0.243, 0.783},
			{-0.663, 0.291, 0.783},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{0.964, 0.018, 0.751},
			{1.189, 0.243, 0.751},
			{0.964, 0.243, 0.751},
			{0.000, 0.000, 1.000},
			newColor(255, 255, 255)},
		{
			{0.915, 0.291, 0.751},
			{1.189, 0.243, 0.751},
			{1.237, 0.291, 0.751},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, 0.751},
			{1.189, 0.018, 0.751},
			{1.237, -0.031, 0.751},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, 0.751},
			{0.964, 0.243, 0.751},
			{0.915, 0.291, 0.751},
			{0.000, 0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.711, 0.243, -0.786},
			{-0.937, 0.018, -0.786},
			{-0.937, 0.243, -0.786},
			{0.000, -0.000, -1.000},
			newColor(255, 255, 255)},
		{
			{-0.663, -0.031, -0.786},
			{-0.711, 0.243, -0.786},
			{-0.663, 0.291, -0.786},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, 0.291, -0.786},
			{-0.937, 0.018, -0.786},
			{-0.985, -0.031, -0.786},
			{0.000, 0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, -0.031, -0.786},
			{-0.711, 0.018, -0.786},
			{-0.663, -0.031, -0.786},
			{-0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{1.189, 0.243, -0.739},
			{0.964, 0.018, -0.739},
			{0.964, 0.243, -0.739},
			{0.000, -0.000, -1.000},
			newColor(255, 255, 255)},
		{
			{0.915, 0.291, -0.739},
			{0.964, 0.018, -0.739},
			{0.915, -0.031, -0.739},
			{0.000, 0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, -0.739},
			{1.189, 0.018, -0.739},
			{1.237, -0.031, -0.739},
			{-0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, -0.739},
			{0.964, 0.243, -0.739},
			{0.915, 0.291, -0.739},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{1.237, -0.031, 0.751},
			{1.189, 0.018, 0.751},
			{0.964, 0.018, 0.751},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, 0.420},
			{1.237, -0.031, 0.420},
			{0.915, -0.031, 0.420},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{1.237, -0.031, 0.751},
			{1.237, -0.031, 0.420},
			{1.237, 0.291, 0.420},
			{1.000, -0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.915, 0.291, 0.751},
			{0.915, 0.291, 0.420},
			{0.915, -0.031, 0.420},
			{-1.000, -0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, 0.751},
			{0.915, -0.031, 0.420},
			{1.237, -0.031, 0.420},
			{0.000, -1.000, -0.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, 0.751},
			{1.237, 0.291, 0.420},
			{0.915, 0.291, 0.420},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, -0.409},
			{1.237, -0.031, -0.409},
			{1.237, 0.291, -0.409},
			{0.000, 0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{1.237, -0.031, -0.739},
			{1.189, 0.018, -0.739},
			{1.189, 0.243, -0.739},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{0.915, 0.291, -0.409},
			{0.915, 0.291, -0.739},
			{0.915, -0.031, -0.739},
			{-1.000, -0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, -0.409},
			{0.915, -0.031, -0.739},
			{1.237, -0.031, -0.739},
			{0.000, -1.000, -0.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, -0.409},
			{1.237, 0.291, -0.739},
			{0.915, 0.291, -0.739},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.985, -0.031, -0.455},
			{-0.663, -0.031, -0.455},
			{-0.663, 0.291, -0.455},
			{0.000, 0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, -0.786},
			{-0.711, 0.243, -0.786},
			{-0.937, 0.243, -0.786},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, 0.291, -0.455},
			{-0.985, 0.291, -0.786},
			{-0.985, -0.031, -0.786},
			{-1.000, -0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.985, -0.031, -0.455},
			{-0.985, -0.031, -0.786},
			{-0.663, -0.031, -0.786},
			{0.000, -1.000, -0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, -0.455},
			{-0.663, 0.291, -0.786},
			{-0.985, 0.291, -0.786},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, -0.031, -0.455},
			{-0.663, -0.031, -0.786},
			{-0.663, 0.291, -0.786},
			{1.000, -0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{1.237, -0.031, -0.739},
			{1.237, 0.291, -0.739},
			{1.237, 0.291, -0.409},
			{1.000, 0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, 0.783},
			{-0.711, 0.243, 0.783},
			{-0.711, 0.018, 0.783},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, 0.453},
			{-0.663, -0.031, 0.453},
			{-0.985, -0.031, 0.453},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, 0.291, 0.783},
			{-0.985, 0.291, 0.453},
			{-0.985, -0.031, 0.453},
			{-1.000, -0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.985, -0.031, 0.783},
			{-0.985, -0.031, 0.453},
			{-0.663, -0.031, 0.453},
			{0.000, -1.000, -0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, 0.291, 0.783},
			{-0.663, 0.291, 0.453},
			{-0.985, 0.291, 0.453},
			{0.000, 1.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.663, -0.031, 0.783},
			{-0.663, -0.031, 0.453},
			{-0.663, 0.291, 0.453},
			{1.000, -0.000, 0.000},
			newColor(0, 0, 0)},
		{
			{-0.937, 0.018, 0.783},
			{-0.711, 0.018, 0.783},
			{-0.711, 0.243, 0.783},
			{0.000, 0.000, 1.000},
			newColor(255, 255, 255)},
		{
			{-0.985, -0.031, 0.783},
			{-0.937, 0.018, 0.783},
			{-0.937, 0.243, 0.783},
			{0.000, 0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.663, -0.031, 0.783},
			{-0.711, 0.018, 0.783},
			{-0.937, 0.018, 0.783},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, 0.291, 0.783},
			{-0.937, 0.243, 0.783},
			{-0.711, 0.243, 0.783},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{0.964, 0.018, 0.751},
			{1.189, 0.018, 0.751},
			{1.189, 0.243, 0.751},
			{0.000, 0.000, 1.000},
			newColor(255, 255, 255)},
		{
			{0.915, 0.291, 0.751},
			{0.964, 0.243, 0.751},
			{1.189, 0.243, 0.751},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, 0.751},
			{1.189, 0.243, 0.751},
			{1.189, 0.018, 0.751},
			{0.000, -0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, 0.751},
			{0.964, 0.018, 0.751},
			{0.964, 0.243, 0.751},
			{0.000, 0.000, 1.000},
			newColor(0, 0, 0)},
		{
			{-0.711, 0.243, -0.786},
			{-0.711, 0.018, -0.786},
			{-0.937, 0.018, -0.786},
			{0.000, -0.000, -1.000},
			newColor(255, 255, 255)},
		{
			{-0.663, -0.031, -0.786},
			{-0.711, 0.018, -0.786},
			{-0.711, 0.243, -0.786},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, 0.291, -0.786},
			{-0.937, 0.243, -0.786},
			{-0.937, 0.018, -0.786},
			{0.000, 0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.985, -0.031, -0.786},
			{-0.937, 0.018, -0.786},
			{-0.711, 0.018, -0.786},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{1.189, 0.243, -0.739},
			{1.189, 0.018, -0.739},
			{0.964, 0.018, -0.739},
			{0.000, -0.000, -1.000},
			newColor(255, 255, 255)},
		{
			{0.915, 0.291, -0.739},
			{0.964, 0.243, -0.739},
			{0.964, 0.018, -0.739},
			{0.000, 0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{0.915, -0.031, -0.739},
			{0.964, 0.018, -0.739},
			{1.189, 0.018, -0.739},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{1.237, 0.291, -0.739},
			{1.189, 0.243, -0.739},
			{0.964, 0.243, -0.739},
			{0.000, -0.000, -1.000},
			newColor(0, 0, 0)},
		{
			{-0.474, -0.239, 0.525},
			{0.578, -0.237, 0.527},
			{0.743, -0.212, 0.546},
			{-0.000, -0.605, 0.797},
			newColor(203, 2, 1)},
		{
			{-0.474, -0.239, 0.525},
			{-0.360, -0.394, 0.404},
			{-0.360, -0.259, 0.510},
			{-0.003, -0.617, 0.787},
			newColor(203, 2, 1)},
		{
			{-0.360, -0.259, -0.510},
			{0.238, -0.401, -0.406},
			{-0.360, -0.394, -0.404},
			{-0.009, -0.617, -0.787},
			newColor(85, 163, 202)},
		{
			{0.302, -0.424, -0.389},
			{0.578, -0.237, -0.527},
			{0.743, -0.212, -0.546},
			{-0.004, -0.589, -0.808},
			newColor(203, 2, 1)},
		{
			{-0.474, -0.239, -0.525},
			{0.578, -0.237, -0.527},
			{-0.360, -0.259, -0.510},
			{-0.000, -0.605, -0.797},
			newColor(203, 2, 1)},
		{
			{0.302, -0.424, -0.389},
			{-0.360, -0.394, -0.404},
			{0.238, -0.401, -0.406},
			{-0.009, -0.598, -0.801},
			newColor(203, 2, 1)},
		{
			{-0.360, -0.259, 0.510},
			{-0.360, -0.394, 0.404},
			{0.238, -0.401, 0.406},
			{-0.009, -0.617, 0.787},
			newColor(85, 163, 202)},
		{
			{-0.474, -0.239, -0.525},
			{-0.360, -0.259, -0.510},
			{-0.360, -0.394, -0.404},
			{-0.003, -0.617, -0.787},
			newColor(203, 2, 1)},
		{
			{0.302, -0.424, 0.389},
			{0.238, -0.401, 0.406},
			{-0.360, -0.394, 0.404},
			{-0.009, -0.598, 0.801},
			newColor(203, 2, 1)},
		{
			{0.302, -0.424, 0.389},
			{0.743, -0.212, 0.546},
			{0.578, -0.237, 0.527},
			{-0.004, -0.589, 0.808},
			newColor(203, 2, 1)},
		{
			{-0.474, -0.239, 0.525},
			{-0.360, -0.259, 0.510},
			{0.578, -0.237, 0.527},
			{-0.000, -0.605, 0.797},
			newColor(203, 2, 1)},
		{
			{-0.474, -0.239, 0.525},
			{-0.474, -0.415, 0.387},
			{-0.360, -0.394, 0.404},
			{-0.003, -0.617, 0.787},
			newColor(203, 2, 1)},
		{
			{-0.360, -0.259, -0.510},
			{0.578, -0.237, -0.527},
			{0.238, -0.401, -0.406},
			{-0.001, -0.594, -0.805},
			newColor(85, 163, 202)},
		{
			{0.302, -0.424, -0.389},
			{0.238, -0.401, -0.406},
			{0.578, -0.237, -0.527},
			{-0.004, -0.589, -0.808},
			newColor(203, 2, 1)},
		{
			{-0.474, -0.239, -0.525},
			{0.743, -0.212, -0.546},
			{0.578, -0.237, -0.527},
			{-0.000, -0.605, -0.797},
			newColor(203, 2, 1)},
		{
			{0.302, -0.424, -0.389},
			{-0.474, -0.415, -0.387},
			{-0.360, -0.394, -0.404},
			{-0.009, -0.598, -0.801},
			newColor(203, 2, 1)},
	};
	Triangle coneTriangles[] = {
		{
			{0.328, -0.679, 0.328},
			{-0.328, -0.679, 0.328},
			{0.000, -1.552, 0.000},
			{-0.000, -0.352, 0.936},
			newColor(255, 110, 0)},
		{
			{-0.328, -0.679, -0.328},
			{0.328, -0.679, -0.328},
			{0.000, -1.552, 0.000},
			{0.000, -0.352, -0.936},
			newColor(255, 110, 0)},
		{
			{-0.328, -0.679, 0.328},
			{-0.328, -0.679, -0.328},
			{0.000, -1.552, 0.000},
			{-0.936, -0.352, 0.000},
			newColor(255, 110, 0)},
		{
			{0.328, -0.679, -0.328},
			{0.328, -0.679, 0.328},
			{0.000, -1.552, 0.000},
			{0.936, -0.352, -0.000},
			newColor(255, 110, 0)},
		{
			{0.492, -0.243, 0.492},
			{0.328, -0.679, -0.328},
			{0.492, -0.243, -0.492},
			{0.936, -0.352, -0.000},
			newColor(255, 255, 255)},
		{
			{-0.492, -0.243, -0.492},
			{-0.328, -0.679, 0.328},
			{-0.492, -0.243, 0.492},
			{-0.936, -0.352, 0.000},
			newColor(255, 255, 255)},
		{
			{-0.492, -0.243, -0.492},
			{0.328, -0.679, -0.328},
			{-0.328, -0.679, -0.328},
			{0.000, -0.352, -0.936},
			newColor(255, 255, 255)},
		{
			{0.492, -0.243, 0.492},
			{-0.328, -0.679, 0.328},
			{0.328, -0.679, 0.328},
			{-0.000, -0.352, 0.936},
			newColor(255, 255, 255)},
		{
			{-0.656, 0.193, 0.656},
			{0.492, -0.243, 0.492},
			{0.656, 0.193, 0.656},
			{0.000, -0.352, 0.936},
			newColor(255, 110, 0)},
		{
			{0.656, 0.193, -0.656},
			{-0.492, -0.243, -0.492},
			{-0.656, 0.193, -0.656},
			{0.000, -0.352, -0.936},
			newColor(255, 110, 0)},
		{
			{-0.656, 0.193, -0.656},
			{-0.492, -0.243, 0.492},
			{-0.656, 0.193, 0.656},
			{-0.936, -0.352, 0.000},
			newColor(255, 110, 0)},
		{
			{0.656, 0.193, 0.656},
			{0.492, -0.243, -0.492},
			{0.656, 0.193, -0.656},
			{0.936, -0.352, 0.000},
			newColor(255, 110, 0)},
		{
			{1.000, 0.193, 1.000},
			{1.000, 0.193, -1.000},
			{-1.000, 0.193, -1.000},
			{0.000, -1.000, 0.000},
			newColor(255, 110, 0)},
		{
			{1.000, 0.193, 1.000},
			{-1.000, 0.193, -1.000},
			{-1.000, 0.193, 1.000},
			{0.000, -1.000, 0.000},
			newColor(255, 110, 0)},
		{
			{0.492, -0.243, 0.492},
			{0.328, -0.679, 0.328},
			{0.328, -0.679, -0.328},
			{0.936, -0.352, -0.000},
			newColor(255, 255, 255)},
		{
			{-0.492, -0.243, -0.492},
			{-0.328, -0.679, -0.328},
			{-0.328, -0.679, 0.328},
			{-0.936, -0.352, 0.000},
			newColor(255, 255, 255)},
		{
			{-0.492, -0.243, -0.492},
			{0.492, -0.243, -0.492},
			{0.328, -0.679, -0.328},
			{0.000, -0.352, -0.936},
			newColor(255, 255, 255)},
		{
			{0.492, -0.243, 0.492},
			{-0.492, -0.243, 0.492},
			{-0.328, -0.679, 0.328},
			{-0.000, -0.352, 0.936},
			newColor(255, 255, 255)},
		{
			{-0.656, 0.193, 0.656},
			{-0.492, -0.243, 0.492},
			{0.492, -0.243, 0.492},
			{-0.000, -0.352, 0.936},
			newColor(255, 110, 0)},
		{
			{0.656, 0.193, -0.656},
			{0.492, -0.243, -0.492},
			{-0.492, -0.243, -0.492},
			{0.000, -0.352, -0.936},
			newColor(255, 110, 0)},
		{
			{-0.656, 0.193, -0.656},
			{-0.492, -0.243, -0.492},
			{-0.492, -0.243, 0.492},
			{-0.936, -0.352, 0.000},
			newColor(255, 110, 0)},
		{
			{0.656, 0.193, 0.656},
			{0.492, -0.243, 0.492},
			{0.492, -0.243, -0.492},
			{0.936, -0.352, -0.000},
			newColor(255, 110, 0)},
	};
	Triangle simpleConeTriangles[] = {
		{
			{-1, 0, 0},
			{1, 0, 0},
			{0, -2, 0},
			{0, -2, 0},
			newColor(120, 50, 0)
		},
		{
			{0, 0, -1},
			{0, 0, 1},
			{0, -2, 0},
			{0, -2, 0},
			newColor(120, 50, 0)
		}
	};

	Car::model = Model({230, carTriangles});
	Track::coneMesh = {22, coneTriangles};
	Track::simpleConeMesh = {2, simpleConeTriangles};

	Display::init();
	Display::clear(newColor(0, 0, 0));
	Display::show();

	Time::update();

	Input::init();

	fp depthBuffer[RENDER_WIDTH*RENDER_HEIGHT];
	Rasterizer::depthBuffer = depthBuffer;

	srand(0);

	Triangle floorTriangles[2] = {
		{
			{-400, 0, -400},
			{-400, 0, 400},
			{400, 0, -400},
			{0, -1, 0},
			newColor(32, 79, 19)
		},
		{
			{-400, 0, 400},
			{400, 0, 400},
			{400, 0, -400},
			{0, -1, 0},
			newColor(32, 79, 19)
		},
	};

	Model floor({2, floorTriangles});

	Triangle sunTriangles[2] = {
		{
			{-1, -1, 0},
			{-1, 1, 0},
			{1, -1, 0},
			{0, 1, 0},
			newColor(255, 255, 0)
		},
		{
			{-1, 1, 0},
			{1, 1, 0},
			{1, -1, 0},
			{0, 1, 0},
			newColor(255, 255, 0)
		},
	};

	Model sun({2, sunTriangles});

	vec3<float> trackPoints[] = {
		{0, 0, 0},
		{2, 0, 0},
		{2+I_SQRT_2, 0, 1-I_SQRT_2},
		{3, 0, 1},
		{4-I_SQRT_2, 0, 1+I_SQRT_2},
		{4, 0, 2},
		{4+I_SQRT_2, 0, 1+I_SQRT_2},
		{5, 0, 1},
		{6-I_SQRT_2, 0, 1-I_SQRT_2},
		{6, 0, 0},
		{7, 0, 0},
		{7+I_SQRT_2, 0, -1+I_SQRT_2},
		{8, 0, -1},
		{7+I_SQRT_2, 0, -1-I_SQRT_2},
		{7, 0, -2},
		{5, 0, -2},
		{5-I_SQRT_2, 0, -3+I_SQRT_2},
		{4, 0, -3},
		{3+I_SQRT_2, 0, -3-I_SQRT_2},
		{3, 0, -4},
		{3-I_SQRT_2, 0, -3-I_SQRT_2},
		{2, 0, -3},
		{1+I_SQRT_2, 0, -3+I_SQRT_2},
		{1, 0, -2},
		{0, 0, -2},
		{-I_SQRT_2, 0, -1-I_SQRT_2},
		{-1, 0, -1},
		{-I_SQRT_2, 0, -1+I_SQRT_2},
	};
	for(int i = 0; i < 28; i++){
		trackPoints[i] = trackPoints[i] * 40;
		trackPoints[i].y = 0;
	}
	Track track = Track(28, trackPoints, 10, 1.2);

	Rasterizer::init();
	Rasterizer::setFOV(70);

	Car car = Car();

	while(true){
		Rasterizer::reset();

		Time::update();
		Input::update();

		if(Input::keyPressed(KEY_MENU)){
			return 0;
		}

		car.processInput();
		car.update(track.isInside(car.position));
		Rasterizer::setFOV(fp(70 + 50.0f / car.speed.i_length()));

		cameraAngle = cameraAngle + (-cameraAngle * 0.02 + 0.02 * car.direction) * Time::delta;

		vec3<float> lc = cameraPos;
		vec3<float> ls = cameraSpeed;
		cameraPos = smoothDamp(cameraPos, car.position, &cameraSpeed, 5.0f, Time::delta, 1000.0f);
		if(cameraPos == car.position){
			cameraPos = lc;
			cameraSpeed = ls;
		}

		Display::clear(newColor(70, 180, 220));

		view = mat4();
		view = mat4::rotateX(view, HALF_PI*0.1);
		view = mat4::translate(view, 0, 2, 6);
		view = mat4::rotateY(view, -cameraAngle - HALF_PI);
		view = mat4::translate(view, -cameraPos.x, 0, -cameraPos.z);

		sun.viewMatrix = view;
		sun.modelMatrix = mat4();
		sun.modelMatrix = mat4::translate(sun.modelMatrix, 20, -6, -20);
		sun.modelMatrix = mat4::translate(sun.modelMatrix, cameraPos.x, 0, cameraPos.z);
		sun.modelMatrix = mat4::rotateY(sun.modelMatrix, cameraAngle + HALF_PI);
		sun.draw(false, false, true);

		floor.viewMatrix = view;
		floor.draw(false, false, true);

		track.render(view, car.position);

		car.render(view);

		char buffer[10];
#ifdef SDL
		sprintf(buffer, "%.3f", Time::delta);
#endif
#ifdef PRIZM
		// sprintf(buffer, "%d", (int)Time::delta);
		itoa((int)Time::delta, (unsigned char*)buffer);
#endif
		// Display::fillRect(0, 0, 30, 20, newColor(0, 0, 0));
		Display::drawText(0, 0, buffer, newColor(255, 255, 255));

		Display::show();
	}
}



